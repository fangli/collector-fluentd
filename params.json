{"name":"Collector-fluentd","tagline":"A distributed metric collection framework using fluentd protocol","body":"Collector-fluentd\r\n=================\r\n\r\nA distributed metric collection framework using fluentd protocol\r\n\r\n-----------------\r\n\r\n## Introduction\r\n\r\nCollector-fluentd gathers metrics from varieties of plugins and send them to a fluentd server. Plugins are standard executable binaries or scripts which have metrics outputs in specific format.\r\n\r\n## Run\r\n\r\n```\r\n[root@my_host plugins]# collector-fluentd --help\r\nusage: collector-fluentd -f [Configuration File Path]\r\n\r\noptional arguments:\r\n  -h, --help            show this help message and exit\r\n  -f CONFIG, --config CONFIG\r\n                        Path to configuration file, default to /etc/collector-\r\n                        fluentd.conf\r\n  -d, --daemonize       Run as a background daemon.\r\n  -v, --version         Show version information of collector-fluentd.\r\n```\r\n\r\n## Configurations\r\n\r\n**1. Section Main**\r\n\r\n`pid_file` is the file which contains PID of running daemon\r\n\r\n`plugin_path` points to the folder which contains plugins. Default to `[install path]/plugins` when leaving it empty\r\n\r\n`log_file` points to a file in which collector-fluentd write logs\r\n\r\n`log_level` is the logs level, optional values are `DEBUG`, `INFO`, `WARNING`, `CRITICAL`\r\n\r\n`reporting_interval` is the most important config which decide the collecting interval, units of seconds\r\n\r\n`plugin_timeout` decides the execution timeout when triggering a plugin. if a plugin didn't exit in specific time, it will be terminated by framework\r\n\r\n`metric_prefix` is the global prefix. this value will be appended to metrics name automatically. For example, if the the output of a plugin is `mysql.connections 1395132494  863` and `metric_prefix=ops.` the real metric name sending to fluentd will be `ops.mysql.connections`\r\n\r\n``\r\n\r\n**2. Section Tags**\r\n\r\nYou could define your personality global tags here, for server recognizing.\r\n\r\nExample:\r\n\r\n```\r\n[tags]\r\ninstanceid=i-xxxxxxx\r\narea=asia\r\ntype=mysql\r\n```\r\n\r\nThe tags in this section will be merged with the tags of plugins' output.\r\n\r\n**3. Section Cache**\r\n\r\n`cache_path` points to the cache file folder. when fluentd server is down, collector-fluentd will save metric data locally. **be sure you have created the folder manually!**\r\n\r\n`cache_file_prefix` is the prefix of cache file name\r\n\r\n**4. Section output**\r\n\r\n`fluentd_host` is the remote fluentd server, Both hostname, FQDN and IP are acceptable.\r\n\r\n`fluentd_port` is the remote port of fluentd instance\r\n\r\n`connection_timeout` is the connection timeout between local and remote fluentd server.\r\n\r\n## Plugins\r\n\r\nPlugins are standard executable scripts. the output should like as below,\r\n\r\n```\r\nmysql.connections 1395132494 863\r\nsys.load.5min 1395132494 3.2\r\nnet.send 1395132494 32847921 if=eth0\r\nnet.recv 1395132494 32847921 if=eth0\r\nmemcache.connections 1395132494 179 port=11211\r\n...\r\n```\r\n\r\nOne metric per line, tags are optional, blank space separated:\r\n\r\n`[Metric.Name] [UNIX Timestamp] [Value] [k1=v1](optional) [k2=v2](optional)  ...`\r\n\r\n**Be sure you have the plugin script executable permission** *(chmod +x my_plugin.sh)*\r\n\r\n## Special Tags\r\n\r\n`cf_datatype` is a special tag in collector-fluentd, it could be set to one of `GAUGE`(default), `COUNTER` and `DERIVE`, for values where you are interested in its value compared to the time\r\n\r\nIf you have a counter(like network traffic or mysql connection in total), you could use this special tag as below\r\n\r\n```\r\nnet.send 1395132494 32847921 if=eth0 cf_datatype=counter\r\n```\r\n\r\nSee [http://munin-monitoring.org/wiki/fieldname.type](http://munin-monitoring.org/wiki/fieldname.type) for details.\r\n\r\n## Notes\r\n\r\nStill in developing stage, use it at your own risk\r\n\r\n## Releases\r\n\r\n1.5.0: Add GAUGE, COUNTER and DERIVE data type support\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}